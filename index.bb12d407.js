import{a as e,o as t,b as a,r as s,Z as o,g as i,z as l,l as n,t as r,J as c,h as d,C as m,K as p,L as f,i as u,e as j,T as b,x as v,k as x,m as y,s as g,j as h,az as w,d as _,I as k,A as I,B}from"./el-select.b78411e2.js";import{_ as C}from"./d-dialog.04f0d663.js";/* empty css                       *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                   */import{SAVE_CONFIG as V}from"./save_config.15a98e40.js";import{a as E}from"./timeFormat.ee22e98c.js";import{_ as M}from"./PinOff16Regular.d21b487a.js";import Y from"./indexdb.57862a78.js";import{o as z}from"./orderBy.bfc0914c.js";import{c as O}from"./cloneDeep.2ccdc48d.js";import{d as H}from"./debounce.abbfdaeb.js";import{E as L}from"./index.c511a369.js";import{P as N}from"./main.4e240c16.js";import{E as D}from"./index.c7cdc822.js";import{E as P}from"./index.7dcba947.js";import{E as A}from"./index.b2dab133.js";import"./el-dialog.64bc625d.js";import"./index.48a3615c.js";import"./isObject.a01dee34.js";import"./icon.e5ddc463.js";import"./index.389214ec.js";import"./index.d2069d58.js";import"./focus-trap.37f37187.js";import"./aria.66f3f71c.js";import"./style.7be20351.js";import"./index.9a99ea33.js";import"./index.502472ff.js";import"./error.7e8331f1.js";import"./scroll.64fda821.js";import"./Close.c8424ab4.js";import"./public-api.7aa6cb2f.js";import"./index.c6f50bb1.js";import"./axios.91e25212.js";import"./baseRequest.da51274f.js";import"./version.8d34b113.js";import"./website.a253acac.js";import"./index.77989186.js";import"./localforage.60f13183.js";import"./_commonjs-dynamic-modules.30ae7933.js";import"./_baseOrderBy.1143981c.js";import"./_Uint8Array.e97e1f00.js";import"./_arrayPush.949d1e07.js";import"./_baseIsEqual.4b13025e.js";import"./hasIn.63fdf8ae.js";import"./identity.737b3aaf.js";import"./_baseFor.671df8ff.js";import"./_baseClone.fe51b368.js";import"./_initCloneObject.73b0453a.js";import"./index.e2562b21.js";import"./typescript.72bf8adc.js";import"./index.34bbf0a0.js";import"./index.d0852ddf.js";import"./index.007a0b27.js";import"./index.4a61e9ca.js";import"./validator.56de5fb2.js";const R={class:"ac mt50 f14"};const q=e({},[["render",function(e,s){return t(),a("div",R,"暂无内容")}]]);var F={};Object.defineProperty(F,"__esModule",{value:!0});const U=s,S={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},T=[(0,U.createElementVNode)("g",{fill:"none"},[(0,U.createElementVNode)("path",{d:"M10.059 2.445a1.5 1.5 0 0 0-2.386.354l-2.02 3.79l-2.811.937a.5.5 0 0 0-.196.828L4.793 10.5l-2.647 2.647L2 14l.854-.146L5.5 11.207l2.146 2.147a.5.5 0 0 0 .828-.196l.937-2.81l3.779-2.024a1.5 1.5 0 0 0 .354-2.38L10.06 2.444zm-1.504.824a.5.5 0 0 1 .796-.118l3.485 3.498a.5.5 0 0 1-.118.794L8.764 9.559a.5.5 0 0 0-.238.283l-.744 2.233l-3.856-3.856l2.232-.744a.5.5 0 0 0 .283-.24L8.555 3.27z",fill:"currentColor"})],-1)];var J=F.default=(0,U.defineComponent)({name:"Pin16Regular",render:function(e,t){return(0,U.openBlock)(),(0,U.createElementBlock)("svg",S,T)}}),K={};Object.defineProperty(K,"__esModule",{value:!0});const Z=s,G={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},Q=[(0,Z.createElementVNode)("g",{fill:"none"},[(0,Z.createElementVNode)("path",{d:"M6.5 7v4a.5.5 0 0 0 1 0V7a.5.5 0 0 0-1 0zM9 6.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5zM10 4h3a.5.5 0 0 1 0 1h-.553l-.752 6.776A2.5 2.5 0 0 1 9.21 14H6.79a2.5 2.5 0 0 1-2.485-2.224L3.552 5H3a.5.5 0 0 1 0-1h3a2 2 0 1 1 4 0zM8 3a1 1 0 0 0-1 1h2a1 1 0 0 0-1-1zM4.559 5l.74 6.666A1.5 1.5 0 0 0 6.79 13h2.42a1.5 1.5 0 0 0 1.49-1.334L11.442 5H4.56z",fill:"currentColor"})],-1)];var W=K.default=(0,Z.defineComponent)({name:"Delete16Regular",render:function(e,t){return(0,Z.openBlock)(),(0,Z.createElementBlock)("svg",G,Q)}});const X=e=>(I("data-v-5bbd1450"),e=e(),B(),e),$={class:"d-layout app-notes hfull"},ee={class:"d-layout-aside notes-tabs",width:"200px",style:{"background-color":"var(--bg-input)"}},te={class:"f18 bb pl20"},ae={class:"d-relative notes-sort fr pr10"},se=["onClick"],oe={class:"f14 b d-elip"},ie={class:"f12 d-inline d-sub"},le=["onClick"],ne=["title","onClick"],re={class:"d-layout-content hfull p10 d-bg-input"},ce={key:0,class:"hfull"},de={class:"d-flex-between f12 d-sub mt5"},me=X((()=>d("img",{style:{width:"180px"},src:"https://files.codelife.cc/itab/app-jijian.png"},null,-1))),pe=X((()=>d("span",null,"在手机上使用备忘录",-1))),fe={name:"appNotes"},ue=e(Object.assign(fe,{setup(e){var s;const I=o(),B=i(null),R=l({activeItem:I.value[0],activeId:null==(s=I.value[0])?void 0:s.id,sortBy:n.get("noteSortBy")||"desc",sortNotes:[]});let F=[];async function U(e){var t;F=await Y.get("notes"),F||(F=I._rawValue,await Y.set("notes",F));let a=z(F,["ut"],[R.sortBy]),s=O(a.slice(0,3));s.forEach((e=>{e.content&&(e.content=e.content.slice(0,40))})),I.value=s,R.sortNotes=a,"del"==e&&(R.activeId=null==(t=a[0])?void 0:t.id);let o=R.sortNotes.find((e=>e.id==R.activeId))||{};R.activeItem=o}function S(){V("notes")}U();const T=()=>{"desc"==R.sortBy?R.sortBy="asc":R.sortBy="desc",n.set("noteSortBy",R.sortBy),U()};const K=H((async()=>{await Y.set("notes",F),U()}),1e3),Z=async()=>{R.activeItem.ut=_().valueOf(),K(),S()};async function G(){let e={id:k(),title:"",content:"",fixed:!1,ct:_().valueOf(),ut:_().valueOf()};R.activeId=e.id,F.push(e),await Y.set("notes",F),U(),requestAnimationFrame((()=>{B.value.focus()})),S()}return(e,s)=>(t(),r(C,null,{default:c((()=>[d("div",$,[d("div",ee,[d("h2",te,[m(" 备忘录 "),d("span",ae,[(t(),a(p,null,f(["asc","desc"],((e,t)=>d("i",{key:t,class:u([[{active:R.sortBy==e},e],"sort-caret"]),onClick:T},null,2))),64))])]),j(I).length?(t(),r(b,{key:1,tag:"ul",name:"list-complete",class:"notes-tabs-body"},{default:c((()=>[(t(!0),a(p,null,f(R.sortNotes,((e,s)=>(t(),a("li",{onClick:t=>(R.activeItem=e,R.activeId=e.id),class:u([{active:R.activeId===e.id},"notes-tabs-item d-elip"]),key:e.id},[d("h4",oe,v(e.title||e.content||"无标题"),1),d("time",ie,v(j(E)(e.ut,"YYYY/M/D HH:mm")),1),d("span",{class:"notes-del",title:"删除备忘录",onClick:t=>function(e,t){A.confirm("删除这条备忘录?","提示",{center:!0,type:"warning"}).then((async()=>{let t=F.findIndex((t=>t.id==e.id));F.splice(t,1),await Y.set("notes",F),await U("del"),S()}))}(e)},[x(j(L),{size:18},{default:c((()=>[x(j(W))])),_:1})],8,le),d("span",{class:"notes-del fixed",title:""+(e.fixed?"取消固定":"固定到桌面"),onClick:t=>async function(e){if(e.fixed=!e.fixed,await Y.set("notes",F),e.fixed)w.value.push(e);else{let t=w.value.findIndex((t=>t.id==e.id));w.value.splice(t,1)}S()}(e)},[x(j(L),{size:18},{default:c((()=>[y(x(j(J),null,null,512),[[g,!e.fixed]]),y(x(j(M),null,null,512),[[g,e.fixed]])])),_:2},1024)],8,ne)],10,se)))),128))])),_:1})):(t(),r(q,{key:0})),d("div",{class:"notes-add d-flex-center",onClick:G,title:"新增备忘录"},[x(j(L),null,{default:c((()=>[x(j(N))])),_:1})])]),d("div",re,[j(I).length?(t(),a("div",ce,[x(j(D),{ref_key:"refTitle",ref:B,class:"note-title",modelValue:R.activeItem.title,"onUpdate:modelValue":s[0]||(s[0]=e=>R.activeItem.title=e),onInput:Z,placeholder:"请输入笔记标题"},null,8,["modelValue"]),x(j(D),{onInput:Z,class:"note-content",type:"textarea",modelValue:R.activeItem.content,"onUpdate:modelValue":s[1]||(s[1]=e=>R.activeItem.content=e),placeholder:"请输入笔记内容"},null,8,["modelValue"]),d("div",de,[d("span",null," 最后编辑："+v(j(E)(R.activeItem.ut,"YYYY-M-D HH:mm:ss"))+", 创建："+v(j(E)(R.activeItem.ct,"YYYY-MM-DD HH:mm:ss")),1),x(j(P),{effect:"light",width:"210px",placement:"top-end"},{reference:c((()=>[pe])),default:c((()=>[me])),_:1})])])):h("",!0)])])])),_:1}))}}),[["__scopeId","data-v-5bbd1450"]]);export{ue as default};
