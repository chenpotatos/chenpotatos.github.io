import{_ as e}from"./d-dialog.04f0d663.js";import{a,$ as t,z as s,aA as i,ax as l,m as o,o as n,b as d,h as c,k as r,J as p,e as f,K as m,L as u,t as b,x as v,i as j,n as y,q as k,D as h,f as x,_,j as g}from"./el-select.b78411e2.js";import{D}from"./vuedraggable.umd.d01db7e4.js";import{a as C,E as N}from"./el-col.f3e67413.js";import{a as w,b as S,E as I}from"./el-main.d6d5f932.js";/* empty css                *//* empty css                */import{pushListApi as T,getStockMinute as E,stockSearchApi as O,getStockInfo as $,getStockKLine as K}from"./stock.05332362.js";import"./save_config.15a98e40.js";import{R as V}from"./Refresh.3d26c42e.js";import{E as z}from"./index.c511a369.js";import{E as R,a as q}from"./index.60081c78.js";import{a3 as A}from"./main.4e240c16.js";import{E as L,a as F}from"./index.f8fe0371.js";import"./el-dialog.64bc625d.js";import"./index.48a3615c.js";import"./isObject.a01dee34.js";import"./icon.e5ddc463.js";import"./index.389214ec.js";import"./index.d2069d58.js";import"./focus-trap.37f37187.js";import"./aria.66f3f71c.js";import"./style.7be20351.js";import"./index.9a99ea33.js";import"./index.502472ff.js";import"./error.7e8331f1.js";import"./scroll.64fda821.js";/* empty css                   */import"./Close.c8424ab4.js";import"./sortable.esm.bf8db74c.js";import"./typescript.72bf8adc.js";import"./axios.91e25212.js";import"./public-api.7aa6cb2f.js";import"./index.c6f50bb1.js";import"./baseRequest.da51274f.js";import"./version.8d34b113.js";import"./website.a253acac.js";import"./index.77989186.js";import"./indexdb.57862a78.js";import"./localforage.60f13183.js";import"./_commonjs-dynamic-modules.30ae7933.js";import"./debounce.abbfdaeb.js";import"./index.007a0b27.js";import"./index.e2562b21.js";import"./index.c7cdc822.js";import"./index.34bbf0a0.js";import"./index.d0852ddf.js";import"./index.9bab3cd4.js";import"./strings.71c48fcd.js";import"./isEqual.7e5ed192.js";import"./_baseIsEqual.4b13025e.js";import"./_Uint8Array.e97e1f00.js";import"./_arrayPush.949d1e07.js";import"./index.62a578ca.js";import"./validator.56de5fb2.js";const G={class:"stock-wrap"},M={class:"stock-handle d-absolute d-hover d-sub"},P={class:"stock-search"},U={class:"d-flex f12",style:{width:"200px"}},H={class:"d-elip",style:{width:"30%"}},J={class:"d-elip",style:{width:"50%"}},B={class:"d-elip",style:{width:"20%"}},Q=["onClick"],W={class:"title fl",style:{width:"44%"}},X={class:"d-elip"},Y={class:"f12 d-main"},Z={class:"fl",style:{width:"30%"}},ee={class:"fl",style:{width:"26%"}},ae=["onClick"],te={class:"mb10 d-flex"},se={class:"d-main"},ie={class:"b f20 mt5"},le={class:"f12"},oe={class:"content-header d-flex pt10",style:{"padding-right":"120px"}},ne={class:"d-cell b f28 d-elip"},de={class:"f16"},ce={class:"f16"},re={class:"b"},pe={class:"b"},fe=a({__name:"Content",setup(e){const a=t(),fe=[{label:"分时",value:"trends"},{label:"日K",value:"101"},{label:"周K",value:"102"},{label:"月K",value:"103"},{label:"季K",value:"104"},{label:"年K",value:"106"}],me=s({keyword:"",activeName:"trends",activeData:{},stockOption:[],selfStockData:[],subOptions:[],stockInfo:[],stockGrails:[],loading:!1,timer:null});function ue(e){return 0==e?"gray":e>0?"#e5353d":"#41c662"}function be(e){var t,s,i,l;a.value=(t=a.value,s=e.newIndex,i=e.oldIndex,l=t[i],t[i]=t[s],t[s]=l,t)}function ve(e){e&&O(e).then((e=>{me.subOptions=e.Data||[]}))}function je(e){if(a.value.some((a=>a.Code==e.Code)))return;let t={Code:e.Code,MktNum:e.MktNum,SecurityTypeName:e.SecurityTypeName,SecurityType:e.SecurityType};a.value.unshift(t),_e()}function ye(e){"trends"==me.activeName?ge():function(){const e={secid:`${me.activeData.f13}.${me.activeData.f12}`,klt:me.activeName};K(e).then((e=>{me.stockOption=e.data.klines||[]}))}()}me.timer?clearInterval(me.timer):me.timer=setInterval((()=>{_e()}),12e4);let ke={1:"sh",2:"sz",5:"sz",19:"r_hk",20:"us"};const he=[{n:"最高",i:33},{n:"今开",i:5},{n:"成交量",i:6,unit:"手"},{n:"最低",i:34},{n:"昨收",i:4},{n:"成交额",i:37,unit:"亿"},{n:"总市值",i:45,unit:"亿"},{n:"流通",i:44,unit:"亿"}];function xe(){let e=a.value.find((e=>e.Code==me.activeData.f12));me.activeData.SecurityTypeName=e.SecurityTypeName;let t=ke[e.SecurityType],s=`${t}${e.Code}`;me.stockInfo=[],$(s).then((e=>{if(!e)return;e=e.split("~");let a=1e4;["r_hk","us"].includes(t)&&(a=1e8),e[37]=(e[37]/a).toFixed(2),e[44]=(e[44]/1).toFixed(2),e[45]=(e[45]/1).toFixed(2),me.stockInfo=e}))}function _e(){if(!a.value.length)return;me.loading=!0;let e=a.value.map((e=>`${e.MktNum}.${e.Code}`));T(e.join(",")).then((e=>{me.selfStockData=e.data.diff||[],i(me.activeData)&&(me.activeData=me.selfStockData[0]),me.activeName="trends",ge(),xe()})).finally((()=>{setTimeout((()=>{me.loading=!1}),200)}));T(["1.000001","0.399001","0.399006","1.000688","100.HSI"].join(",")).then((e=>{me.stockGrails=e.data.diff||[]}))}function ge(){const e={secid:`${me.activeData.f13}.${me.activeData.f12}`};E(e).then((e=>{me.stockOption=e.data.trends||[]}))}return _e(),(e,t)=>{const s=l("loading");return o((n(),d("div",G,[c("div",M,[r(f(z),{size:16,title:"手动刷新，2分钟自动刷新一次",onClick:_e},{default:p((()=>[r(f(V))])),_:1})]),r(f(I),{class:"d-layout hfull"},{default:p((()=>[r(f(w),{class:"d-left-tabs pt30",style:{"background-color":"var(--bg-card)",width:"220px","border-right":"1px solid rgba(var(--alpha-color), 0.04)"}},{default:p((()=>[c("div",P,[r(f(R),{class:"wfull",modelValue:me.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>me.keyword=e),size:"default",filterable:"",remote:"","reserve-keyword":"","value-key":"Code",placeholder:"输入股票名称、代码","remote-method":ve,onChange:je},{default:p((()=>[(n(!0),d(m,null,u(me.subOptions,(e=>(n(),b(f(q),{key:e.ID,value:e},{default:p((()=>[c("li",U,[c("span",H,v(e.Code),1),c("span",J,v(e.Name),1),c("span",B,v(e.SecurityTypeName),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])]),r(f(D),{class:"self-content d-scrollbar-hide",animation:200,list:me.selfStockData,itemKey:"f12",onEnd:be},{item:p((({element:e,index:t})=>[(n(),d("p",{class:j(["self-content-li d-hidden",[ue(e.f3),{active:me.activeData==e}]]),key:e.f12,onClick:a=>{return t=e,me.activeData=t,me.activeName="trends",ge(),void xe();var t},style:y({color:ue(e.f3)})},[c("span",W,[c("p",X,v(e.f14),1),c("code",Y,v(e.f12),1)]),c("span",Z,v(e.f2),1),c("span",ee,v(e.f3)+"%",1),c("span",{class:"stock-del d-flex-center",onClick:k((s=>function(e,t){e.f12==me.activeData.f12&&(me.activeData={}),a.value.splice(t,1),_e()}(e,t)),["stop"])},[r(f(z),null,{default:p((()=>[r(f(A))])),_:1})],8,ae)],14,Q))])),_:1},8,["list"])])),_:1}),r(f(S),{class:"todo-content pr10 hfull",style:{"padding-top":"10px"}},{default:p((()=>[c("ul",te,[(n(!0),d(m,null,u(me.stockGrails,(e=>(n(),d("li",{style:y({color:ue(e.f3)}),class:"mr20",key:e.f1},[c("span",se,v(e.f14),1),c("p",ie,v(e.f2),1),c("p",le,v(e.f4)+"("+v(e.f3)+"%)",1)],4)))),128))]),c("div",oe,[c("span",ne,[c("b",null,v(me.activeData.f14),1),c("small",de,v(me.activeData.f12),1),c("small",ce,v(me.activeData.SecurityTypeName),1)]),c("p",re,[c("span",null,v(me.activeData.f2),1),c("span",{style:y([{background:"gray","border-radius":"3px",padding:"0 4px","line-height":"18px",color:"#fff"},{backgroundColor:ue(me.activeData.f3)}]),class:"ml10 f12 d-inline"},v(me.activeData.f3),5)])]),r(f(C),{class:"mt10 bt",style:{"line-height":"26px"}},{default:p((()=>[(n(),d(m,null,u(he,(e=>r(f(N),{span:8,key:e},{default:p((()=>[c("span",null,v(e.n)+"：",1),c("span",pe,v(me.stockInfo[e.i]||"-")+" "+v(e.unit),1)])),_:2},1024))),64))])),_:1}),r(f(L),{class:"stock-title bb bt",modelValue:me.activeName,"onUpdate:modelValue":t[1]||(t[1]=e=>me.activeName=e),onTabClick:ye},{default:p((()=>[(n(),d(m,null,u(fe,(e=>r(f(F),{key:e.value,name:e.value,label:e.label},null,8,["name","label"]))),64))])),_:1},8,["modelValue"]),"trends"==me.activeName?(n(),b(h(x((()=>_((()=>import("./Trends.97346718.js")),["./Trends.97346718.js","./install.980decee.js","./el-select.b78411e2.js","./el-select.b0658523.css","./install.b16b3832.js"],import.meta.url)))),{key:0,data:me.stockOption,style:{width:"100%",height:"316px"}},null,8,["data"])):g("",!0),"trends"!=me.activeName?(n(),b(h(x((()=>_((()=>import("./KLine.dc7b3389.js")),["./KLine.dc7b3389.js","./install.980decee.js","./el-select.b78411e2.js","./el-select.b0658523.css","./install.b16b3832.js"],import.meta.url)))),{key:1,data:me.stockOption,style:{width:"100%",height:"316px"}},null,8,["data"])):g("",!0)])),_:1})])),_:1})])),[[s,me.loading]])}}},[["__scopeId","data-v-98f5134a"]]),me={name:"appStock"},ue=Object.assign(me,{setup:a=>(a,t)=>(n(),b(e,{height:"600px"},{default:p((()=>[r(fe)])),_:1}))});export{ue as default};
