import{N as e,o as l,b as t,h as a,t as i,k as s,a as o,z as n,w as r,J as c,e as d,K as m,L as p,i as u,m as w,s as f,x as h,C as v,q as g,ao as x,a6 as y,au as b,A as _,B as j,g as k,c as C,V as z,ax as M,j as L,D as V,d as I}from"./el-select.b78411e2.js";import{_ as B}from"./d-dialog.04f0d663.js";import{_ as S}from"./d-scroll-x.f2cd1167.js";import{a as A,E as H}from"./el-col.f3e67413.js";import{a as O}from"./timeFormat.ee22e98c.js";import{getWeather as D,getWeather24H as T}from"./weather.725bab1f.js";import{b as q}from"./weatherApi.9b943a5a.js";import F from"./indexdb.57862a78.js";import{ad as E,ae as U,a4 as $}from"./main.4e240c16.js";import{u as P,C as W,i as R,a as N,b as G}from"./install.980decee.js";import{E as J,a as K}from"./index.60081c78.js";import{N as Q}from"./Drawer.b139a2bc.js";import"./el-dialog.64bc625d.js";import"./index.c511a369.js";import"./index.48a3615c.js";import"./isObject.a01dee34.js";import"./style.7be20351.js";import"./icon.e5ddc463.js";import"./index.389214ec.js";import"./index.d2069d58.js";import"./focus-trap.37f37187.js";import"./aria.66f3f71c.js";import"./index.9a99ea33.js";import"./index.502472ff.js";import"./error.7e8331f1.js";import"./scroll.64fda821.js";/* empty css                   */import"./Close.c8424ab4.js";import"./typescript.72bf8adc.js";import"./baseApi.2957ab85.js";import"./baseRequest.da51274f.js";import"./axios.91e25212.js";import"./version.8d34b113.js";import"./localforage.60f13183.js";import"./_commonjs-dynamic-modules.30ae7933.js";import"./index.007a0b27.js";import"./index.e2562b21.js";import"./index.c7cdc822.js";import"./index.34bbf0a0.js";import"./index.d0852ddf.js";import"./index.9bab3cd4.js";import"./strings.71c48fcd.js";import"./isEqual.7e5ed192.js";import"./_baseIsEqual.4b13025e.js";import"./_Uint8Array.e97e1f00.js";import"./_arrayPush.949d1e07.js";import"./debounce.abbfdaeb.js";import"./index.62a578ca.js";import"./validator.56de5fb2.js";import"./_baseFor.671df8ff.js";import"./_initCloneObject.73b0453a.js";import"./isArrayLikeObject.38216022.js";import"./_baseRest.99185c71.js";import"./identity.737b3aaf.js";import"./_overRest.38ce022a.js";import"./_isIterateeCall.0163ccc8.js";const X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Y=[a("g",{fill:"none"},[a("path",{d:"M11.299 5.487a7.33 7.33 0 0 1 .377-.328c.583-.473 1.474-1.043 2.492-1.143a2.978 2.978 0 0 1 .886.04c1.238.241 2.147 1.224 2.663 1.93c.595.811.1 1.82-.737 2.09L12.8 9.429l-3.098 4.006c-.97 1.254-2.968.343-2.657-1.212l.293-1.464L4.32 11.8A1.75 1.75 0 0 1 2 10.146V7.16c0-.076.006-.148.019-.217c.157-.897 1.283-1.217 1.902-.62c.096.09.18.204.245.34l.593 1.224l5.805-1.935c.258-.086.503-.249.735-.465zM5.384 6.624l3.73-1.243L7.508 4.28A1.596 1.596 0 0 0 6.605 4C5.28 4 4.532 5.525 5.345 6.573l.039.051zM2.75 16.5a.75.75 0 0 0 0 1.5h14.5a.75.75 0 0 0 0-1.5H2.75z",fill:"currentColor"})],-1)],Z=e({name:"AirplaneTakeOff20Filled",render:function(e,a){return l(),t("svg",X,Y)}}),ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},le=[a("g",{fill:"none"},[a("path",{d:"M13.303 3.525a5.071 5.071 0 0 1 7.172 7.172l-9.778 9.778a5.071 5.071 0 0 1-7.172-7.172l9.778-9.778zm6.111 1.061a3.571 3.571 0 0 0-5.05 0l-4.359 4.359l5.05 5.05l4.36-4.359a3.571 3.571 0 0 0 0-5.05zm-8.606 13.691a.75.75 0 0 0-1.06-1.06l-1.441 1.44a1.5 1.5 0 0 1-2.1.022l-.017-.016a.75.75 0 1 0-1.039 1.082l.017.016a3 3 0 0 0 4.2-.043l1.44-1.44z",fill:"currentColor"})],-1)],te=e({name:"Pill24Filled",render:function(e,a){return l(),t("svg",ee,le)}}),ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ie=[a("g",{fill:"none"},[a("path",{d:"M15.744 4.276c1.221-2.442 4.476-2.97 6.406-1.04l6.614 6.614c1.93 1.93 1.402 5.186-1.04 6.406l-6.35 3.176a1.5 1.5 0 0 0-.753.867l-1.66 4.983a2 2 0 0 1-3.312.782l-4.149-4.15l-6.086 6.087H4v-1.415l6.086-6.085l-4.149-4.15a2 2 0 0 1 .782-3.31l4.982-1.662a1.5 1.5 0 0 0 .868-.752l3.175-6.35z",fill:"currentColor"})],-1)],se=e({name:"Pin32Filled",render:function(e,a){return l(),t("svg",ae,ie)}}),oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ne=[a("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M5 21c.5-4.5 2.5-8 7-10"}),a("path",{d:"M9 18c6.218 0 10.5-3.288 11-12V4h-4.014c-9 0-11.986 4-12 9c0 1 0 3 2 5h3z"})],-1)],re=e({name:"Leaf",render:function(e,a){return l(),t("svg",oe,ne)}}),ce={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},de=[a("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M4 6h16"}),a("path",{d:"M4 12h16"}),a("path",{d:"M4 18h16"})],-1)],me=e({name:"Menu2",render:function(e,a){return l(),t("svg",ce,de)}});var pe=e({name:"Aim"});const ue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},we=s("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),fe=s("path",{fill:"currentColor",d:"M512 96a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V128a32 32 0 0 1 32-32zm0 576a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V704a32 32 0 0 1 32-32zM96 512a32 32 0 0 1 32-32h192a32 32 0 0 1 0 64H128a32 32 0 0 1-32-32zm576 0a32 32 0 0 1 32-32h192a32 32 0 1 1 0 64H704a32 32 0 0 1-32-32z"},null,-1);pe.render=function(e,t,a,s,o,n){return l(),i("svg",ue,[we,fe])},pe.__file="packages/components/Aim.vue";const he=pe;var ve=e({name:"SemiSelect"});const ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},xe=s("path",{fill:"currentColor",d:"M128 448h768q64 0 64 64t-64 64H128q-64 0-64-64t64-64z"},null,-1);ve.render=function(e,t,a,s,o,n){return l(),i("svg",ge,[xe])},ve.__file="packages/components/SemiSelect.vue";const ye=ve,be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},_e=[a("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8s8 3.58 8 8s-3.58 8-8 8z",fill:"currentColor"},null,-1),a("path",{d:"M12.5 7H11v6l5.25 3.15l.75-1.23l-4.5-2.67z",fill:"currentColor"},null,-1)],je=e({name:"AccessTimeFilled",render:function(e,a){return l(),t("svg",be,_e)}}),ke={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ce=[a("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10s10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3s1.34-3 3-3s3 1.34 3 3z",fill:"currentColor"},null,-1)],ze=e({name:"AdjustRound",render:function(e,a){return l(),t("svg",ke,Ce)}}),Me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Le=[a("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z",fill:"currentColor"},null,-1)],Ve=e({name:"CalendarMonthOutlined",render:function(e,a){return l(),t("svg",Me,Le)}}),Ie={class:"pl20 pr20 pb20 pt10 app-weather-list-select"},Be=(e=>(_("data-v-526ab4b5"),e=e(),j(),e))((()=>a("h2",{class:"al mb10"},"天气",-1))),Se={class:"d-icon d-absolute city-item-pin"},Ae={class:"al"},He={class:"f14",style:{"line-height":"35px",color:"#efefef"}},Oe=["src"],De={class:"ar"},Te={class:"b f22",style:{"line-height":"35px",color:"#efefef"}},qe={class:""},Fe=["onClick"],Ee={class:"d-icon d-absolute city-item-pin"},Ue=["onClick"],$e={class:"al"},Pe={class:"f14",style:{"line-height":"35px",color:"#efefef"}},We=["src"],Re={class:"ar"},Ne={class:"b f22",style:{"line-height":"35px",color:"#efefef"}},Ge={class:""},Je=o({__name:"weather-list",props:{modelValue:Boolean,cityId:[String,Number]},emits:["change","update:modelValue"],setup(e,{emit:o}){const _=e,j=n({defaultCity:{now:{},location:{}},cityList:[],cityId:"",cityOptions:[],loading:!1});function k(){o("update:modelValue",!1)}function C(e){e&&q({location:e}).then((e=>{let l=e.location||[];l=l.map((e=>({label:e.adm2+"-"+e.name,...e}))),j.cityOptions=l}))}function z(e){o("change",e.location)}async function M(e){let l=await F.get("weather-list")||[];if(l.some((l=>l.location.id===e)))return;if(j.loading=!0,!e)return;let t=j.cityOptions.find((l=>l.id==e)),a=await D(t,!0,!1);l.push(a),j.cityList=l,await F.set("weather-list",l,18e5),j.cityId="",setTimeout((()=>{j.loading=!1}),200)}return r((()=>_.modelValue),(e=>{e&&async function(){let e=await F.getItem("weather-default-city")||{};j.defaultCity=e.data||{now:{},location:{}},e.isExp&&D(null,!0,!1).then((e=>{j.defaultCity=e,F.set("weather-default-city",e,18e5)}));let l=await F.getItem("weather-list")||[];if(j.cityList=l.data||[],!l.isExp)return;let t=(l.data||[]).map((e=>D(e.location,!0,!1)));Promise.all(t).then((e=>{j.cityList=e,F.set("weather-list",e,18e5)}))}()})),(o,n)=>(l(),i(d(Q),x({"trap-focus":!1,"default-width":"300px","block-scroll":!1,to:"#weather-dialog"},o.$attrs,{show:e.modelValue,"onUpdate:show":n[2]||(n[2]=e=>y(modelValue)?modelValue.value=e:null),class:"weather-list","on-update:show":k}),{default:c((()=>[a("div",Ie,[Be,s(d(J),{class:"wfull mb10","append-to":"",modelValue:j.cityId,"onUpdate:modelValue":n[0]||(n[0]=e=>j.cityId=e),"remote-method":C,filterable:"",remote:"",placeholder:"输入城市、乡镇",onChange:M,size:"default"},{default:c((()=>[(l(!0),t(m,null,p(j.cityOptions,(e=>(l(),i(d(K),{key:e.value,label:e.label,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),a("div",null,[a("section",{class:u(["city-item",d(E)(j.defaultCity.now.cond_code)]),onClick:n[1]||(n[1]=e=>z(j.defaultCity))},[w(a("i",Se,[s(d(se))],512),[[f,e.cityId==j.defaultCity.location.id]]),a("div",Ae,[a("p",He," 我的位置 · "+h(j.defaultCity.location.name),1),a("p",null,[a("img",{class:"mr5",style:{width:"14px",height:"14px","vertical-align":"-2px"},src:`https://files.codelife.cc/itab/weather/icon/${j.defaultCity.now.cond_code}-fill.svg`},null,8,Oe),v(" "+h(j.defaultCity.now.cond_txt),1)])]),a("div",De,[a("p",Te,h(j.defaultCity.now.tmp)+"° ",1),a("p",qe," 最高"+h(j.defaultCity.daily_forecast&&j.defaultCity.daily_forecast[0].tmp_max)+"° 最低"+h(j.defaultCity.daily_forecast&&j.defaultCity.daily_forecast[0].tmp_min)+"° ",1)])],2),(l(!0),t(m,null,p(j.cityList,((i,o)=>(l(),t("section",{class:u(["city-item",d(E)(i.now.cond_code)]),key:o,onClick:e=>z(i)},[w(a("i",Ee,[s(d(se))],512),[[f,e.cityId==i.location.id]]),a("i",{onClick:g((e=>function(e){j.cityList.splice(e,1),F.set("weather-list",b(j.cityList),18e5)}(o)),["stop"]),class:"d-icon d-absolute city-item-delete",title:"删除"},[s(d(ye))],8,Ue),a("div",$e,[a("p",Pe,h(i.location.name),1),a("p",null,[a("img",{class:"mr5",style:{width:"14px",height:"14px","vertical-align":"-2px"},src:`https://files.codelife.cc/itab/weather/icon/${i.now.cond_code}-fill.svg`},null,8,We),v(" "+h(i.now.cond_txt),1)])]),a("div",Re,[a("p",Ne,h(i.now.tmp)+"° ",1),a("p",Ge," 最高"+h(i.daily_forecast[0].tmp_max)+"° 最低"+h(i.daily_forecast[0].tmp_min)+"° ",1)])],10,Fe)))),128))])])])),_:1},16,["show"]))}},[["__scopeId","data-v-526ab4b5"]]),Ke={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Qe=[a("path",{d:"M16 30l-3.463-5.822L6 26l1.822-6.537L2 16l5.822-3.463L6 6l6.537 1.822L16 2l3.463 5.822L26 6l-1.822 6.537L30 16l-5.822 3.463L26 26l-6.537-1.822z",fill:"currentColor"},null,-1)],Xe=e({name:"UvIndexFilled",render:function(e,a){return l(),t("svg",Ke,Qe)}}),Ye={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 496 512"},Ze=[a("path",{d:"M212.3 10.3c-43.8 6.3-86.2 24.1-122.2 53.8l77.4 77.4c27.8-35.8 43.3-81.2 44.8-131.2zM248 222L405.9 64.1c-42.4-35-93.6-53.5-145.5-56.1c-1.2 63.9-21.5 122.3-58.7 167.7L248 222zM56.1 98.1c-29.7 36-47.5 78.4-53.8 122.2c50-1.5 95.5-17 131.2-44.8L56.1 98.1zm272.2 204.2c45.3-37.1 103.7-57.4 167.7-58.7c-2.6-51.9-21.1-103.1-56.1-145.5L282 256l46.3 46.3zM248 290L90.1 447.9c42.4 34.9 93.6 53.5 145.5 56.1c1.3-64 21.6-122.4 58.7-167.7L248 290zm191.9 123.9c29.7-36 47.5-78.4 53.8-122.2c-50.1 1.6-95.5 17.1-131.2 44.8l77.4 77.4zM167.7 209.7C122.3 246.9 63.9 267.3 0 268.4c2.6 51.9 21.1 103.1 56.1 145.5L214 256l-46.3-46.3zm116 292c43.8-6.3 86.2-24.1 122.2-53.8l-77.4-77.4c-27.7 35.7-43.2 81.2-44.8 131.2z",fill:"currentColor"},null,-1)],el=e({name:"BasketballBall",render:function(e,a){return l(),t("svg",Ye,Ze)}}),ll={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 480 512"},tl=[a("path",{d:"M438.66 212.33l-11.24-28.1l-19.93-49.83C390.38 91.63 349.57 64 303.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4l-19.93 49.83l-11.24 28.1C17.22 221.5 0 244.66 0 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-27.34-17.22-50.5-41.34-59.67zm-306.73-54.16c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L368 208H112l19.93-49.83zM80 319.8c-19.2 0-32-12.76-32-31.9S60.8 256 80 256s48 28.71 48 47.85s-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S380.8 256 400 256s32 12.76 32 31.9s-12.8 31.9-32 31.9z",fill:"currentColor"},null,-1)],al=e({name:"CarAlt",render:function(e,a){return l(),t("svg",ll,tl)}}),il={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 576 512"},sl=[a("path",{d:"M327.1 96c-89.97 0-168.54 54.77-212.27 101.63L27.5 131.58c-12.13-9.18-30.24.6-27.14 14.66L24.54 256L.35 365.77c-3.1 14.06 15.01 23.83 27.14 14.66l87.33-66.05C158.55 361.23 237.13 416 327.1 416C464.56 416 576 288 576 256S464.56 96 327.1 96zm87.43 184c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24c13.26 0 24 10.74 24 24c0 13.25-10.75 24-24 24z",fill:"currentColor"},null,-1)],ol=e({name:"Fish",render:function(e,a){return l(),t("svg",il,sl)}}),nl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 496 512"},rl=[a("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm-160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm194.8 170.2C334.3 380.4 292.5 400 248 400s-86.3-19.6-114.8-53.8c-13.6-16.3 11-36.7 24.6-20.5c22.4 26.9 55.2 42.2 90.2 42.2s67.8-15.4 90.2-42.2c13.4-16.2 38.1 4.2 24.6 20.5z",fill:"currentColor"},null,-1)],cl=e({name:"Smile",render:function(e,a){return l(),t("svg",nl,rl)}}),dl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 640 512"},ml=[a("path",{d:"M631.2 96.5L436.5 0C416.4 27.8 371.9 47.2 320 47.2S223.6 27.8 203.5 0L8.8 96.5c-7.9 4-11.1 13.6-7.2 21.5l57.2 114.5c4 7.9 13.6 11.1 21.5 7.2l56.6-27.7c10.6-5.2 23 2.5 23 14.4V480c0 17.7 14.3 32 32 32h256c17.7 0 32-14.3 32-32V226.3c0-11.8 12.4-19.6 23-14.4l56.6 27.7c7.9 4 17.5.8 21.5-7.2L638.3 118c4-7.9.8-17.6-7.1-21.5z",fill:"currentColor"},null,-1)],pl=e({name:"Tshirt",render:function(e,a){return l(),t("svg",dl,ml)}}),ul={class:"app-weather-body d-scrollbar-hide",style:{"--bg-card":"rgba(0, 0, 0, 0)","--bg-hover":"rgba(0, 0, 0, 0.2)","padding-bottom":"6px"}},wl={class:"d-flex-between"},fl={class:"f12"},hl={class:"ml5"},vl={class:"f12 ml20"},gl={class:"d-flex-y app-weather-select"},xl={class:"d-flex-y"},yl={class:"weather-now-tmp"},bl={class:"ml20 f13"},_l={key:0,class:"weather-aqi",style:{"vertical-align":"middle"}},jl={class:"d-icon f20",style:{"vertical-align":"middle"}},kl={class:"mt10 d-flex-y"},Cl=["src"],zl={class:"mr10"},Ml={class:"mr10"},Ll={class:"mr10"},Vl={key:0,class:"f13",style:{color:"rgba(255, 255, 255, 0.82)"}},Il={class:"mt10 mb10 f13 weather-info",style:{"line-height":"18px",height:"16px",color:"rgba(255, 255, 255, 0.82)"}},Bl={class:"weather-card-bg",style:{"--bg-card":"rgba(0, 0, 0, 0)","--bg-hover":"rgba(0, 0, 0, 0.2)","padding-bottom":"10px"}},Sl={class:"weather-card-title d-flex-y"},Al={class:"d-icon f15 mr5"},Hl={class:"f14 weather-hours"},Ol={class:"mb10 f12"},Dl={class:"mb10 d-flex-center"},Tl=["title","src"],ql={class:"weather-card-bg"},Fl={class:"weather-card-title d-flex-y"},El={class:"d-icon f15 mr5"},Ul={class:"mt5 weather-daily_grid f14"},$l={style:{"line-height":"22px"}},Pl={style:{"line-height":"12px"},class:"mb10 f12"},Wl={class:"mb10 d-flex-center"},Rl=["src"],Nl=a("p",{style:{height:"180px"}},null,-1),Gl={class:"mb10 d-flex-center"},Jl={class:"d-icon mr5"},Kl={class:"weather-card-bg"},Ql={class:"weather-card-title d-flex-y"},Xl={class:"d-icon f15 mr5"},Yl={class:"weather-lifestyle f12"},Zl={class:"d-flex-y"},et={class:"weather-lifestyle-icon mr10 d-flex-center"},lt={class:"d-icon"},tt={class:"f12"},at={style:{color:"rgba(255, 255, 255, 0.5)","font-weight":"200"}},it=a("div",{class:"mt10 f12 ac"},"天气数据由和风天气提供",-1),st={name:"appWeather",title:"i天气",icon:"weather-icon",components:{uv:Xe,flu:te,trav:Z,comf:cl,fsh:ol,cw:al,drsg:pl,sport:el},description:"准确预报全球近10000多个地区的一周天气预报，包括国内县级和县级以上全部城市"},ot=Object.assign(st,{setup(e){P([R,N,G]);const o={location:{},now:{tmp:0},daily_forecast:[{}],air_now_city:{},sun:{},rain:{},lifestyle:[]},r=k(o),f=k(!1);F.getItem("weather").then((e=>{r.value=e.data||o,e.isExp&&D().then((e=>{r.value=e||o}))}));const g=n({cityId:"",cityOptions:[],loading:!1,searchWeather:null,updateTime:"",hourly24Data:[]}),x=C((()=>{const e={type:"line",smooth:.2,label:{show:!0,position:"bottom",color:"#fff",borderWidth:0,formatter:function(e){return e.value+"°"}},lineStyle:{width:1},symbolSize:10,itemStyle:{width:10}},l=r.value.daily_forecast.map((e=>e.tmp_max)),t=r.value.daily_forecast.map((e=>e.tmp_min));return{backgroundColor:"transparent",color:["#fff","#fff"],grid:{left:"4%",right:"6%",bottom:30,top:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,show:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value",show:!1,min:Math.min(...t)},series:[{...e,label:{show:!0,position:"top",color:"#fff",borderWidth:0,formatter:function(e){return e.value+"°"}},data:l},{...e,data:t}]}})),y={cw:"洗车指数",drsg:"穿衣指数",uv:"紫外线指数",fsh:"钓鱼指数",comf:"舒适度指数",sport:"运动指数",flu:"感冒指数",trav:"旅游指数"},b=C((()=>(r.value.lifestyle||[]).map((e=>({...e,name:y[e.type]})))));C((()=>({backgroundImage:r.value.now.cond_code&&weatherbg(r.value.now.cond_code)})));const _=C((()=>r.value.now.cond_code&&E(r.value.now.cond_code)));function j(e){g.cityOptions=[],e&&q({location:e}).then((e=>{let l=e.location||[];l=l.map((e=>({label:e.adm2+"-"+e.name,...e}))),g.cityOptions=l}))}async function Q(){g.loading=!0,D(null,!0).then((e=>{r.value=e})).finally((()=>{g.loading=!1})),T(!0).then((e=>{g.hourly24Data=e.hourly||[]})),g.cityId=""}async function X(e){let l=e;if("string"==typeof e){if(!e)return;l=g.cityOptions.find((l=>l.id==e))}g.loading=!0,await D(l,!0).then((e=>{r.value=e})),await T(!0).then((e=>{g.hourly24Data=e.hourly||[]})),setTimeout((()=>{g.loading=!1}),100)}function Y(e){let l="周"+$[I(e).day()];return I(e).format("DD")==I().format("DD")&&(l="今天"),l}return async function(){let e=await T();g.hourly24Data=e.hourly||[]}(),(e,o)=>{const n=z("el-icon"),y=M("loading");return l(),i(B,{id:"weather-dialog","default-width":502,style:{"overflow-x":"hidden"}},{default:c((()=>[w((l(),t("div",{class:u(["app-weather",d(_)])},[a("div",ul,[a("div",wl,[a("div",fl,[a("span",null,h(r.value.location.adm2)+" · ",1),a("span",null,h(r.value.location.name),1),a("span",hl,h(r.value.now.cond_txt),1),a("span",vl,"发布于:"+h(d(O)(r.value.updateTime)),1)]),a("div",gl,[s(d(J),{"append-to":"",modelValue:g.cityId,"onUpdate:modelValue":o[0]||(o[0]=e=>g.cityId=e),"remote-method":j,filterable:"",remote:"","popper-class":"app-weather-popper",placeholder:"输入城市、乡镇",onChange:X,size:"small"},{default:c((()=>[(l(!0),t(m,null,p(g.cityOptions,(e=>(l(),i(d(K),{key:e.value,label:e.label,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),s(n,{title:"自动定位",class:"location-btn",onClick:Q},{default:c((()=>[s(d(he))])),_:1}),a("i",{class:"d-icon f22 ml5",onClick:o[1]||(o[1]=e=>f.value=!0)},[s(d(me))])])]),s(d(A),{class:"mt20 mb20"},{default:c((()=>[s(d(H),{xs:24,sm:12},{default:c((()=>[a("div",xl,[a("span",yl,h(r.value.now.tmp)+"°",1),a("div",bl,[r.value.air_now_city?(l(),t("p",_l,[a("i",jl,[s(d(re))]),v(" "+h(r.value.air_now_city.qlty)+"/"+h(r.value.air_now_city.aqi),1)])):L("",!0),a("p",kl,[a("img",{class:"mr5",style:{width:"18px",height:"18px"},src:`https://files.codelife.cc/itab/weather/icon/${r.value.now.cond_code}-fill.svg`},null,8,Cl),a("span",zl,h(r.value.now.cond_txt),1),a("span",Ml,h(r.value.now.wind_dir),1),a("span",Ll,h(r.value.now.wind_sc)+"级",1)])])])])),_:1})])),_:1}),r.value.rain?(l(),t("div",Vl," 预计"+h(r.value.rain.txt),1)):L("",!0),a("div",Il,[a("span",null," 温度 "+h(r.value.daily_forecast[0].tmp_min)+"°~"+h(r.value.daily_forecast[0].tmp_max)+"° ",1),a("span",null,"湿度 "+h(r.value.now.hum)+"%",1),a("span",null,"气压 "+h(r.value.now.pres)+"hPa",1),a("span",null,"降水 "+h(r.value.now.pcpn)+"mm",1),a("span",null,"日出 "+h(r.value.sun.rise),1),a("span",null,"日落 "+h(r.value.sun.set),1)]),a("div",Bl,[a("h3",Sl,[a("i",Al,[s(d(je))]),v(" 24小时天气预报 ")]),s(S,{class:"f14 weather-hours"},{default:c((()=>[a("ul",Hl,[(l(!0),t(m,null,p(g.hourly24Data,((e,i)=>(l(),t("li",{class:"weather-hours_item ac pb20",key:i,style:{"min-width":"50px"}},[a("p",Ol,h(d(O)(e.fxTime,"H时")),1),a("p",Dl,[a("img",{title:e.text,style:{width:"20px",height:"20px"},src:`https://files.codelife.cc/itab/weather/icon/${e.icon}-fill.svg`},null,8,Tl)]),a("p",null,h(e.temp)+"°",1)])))),128))])])),_:1})]),a("div",ql,[a("h3",Fl,[a("i",El,[s(d(Ve))]),v(" 7日天气预报 ")]),a("ul",Ul,[(l(!0),t(m,null,p(r.value.daily_forecast,((e,i)=>{return l(),t("li",{class:"weather-daily_item ac",key:i},[a("p",$l,h(Y(e.date)),1),a("p",Pl,h((o=e.date,I(o).format("MM-DD"))),1),a("p",Wl,[a("img",{class:"mr5",style:{width:"18px",height:"18px"},src:`https://files.codelife.cc/itab/weather/icon/${e.cond_code_d}-fill.svg`},null,8,Rl),v(h(e.cond_txt_d),1)]),Nl,a("p",Gl,[a("i",Jl,[s(d(U))]),v(" "+h(e.wind_sc)+"级 ",1)])]);var o})),128)),s(d(W),{autoresize:"",theme:"dark",class:"weather-line",option:d(x)},null,8,["option"])])]),a("div",Kl,[a("h3",Ql,[a("i",Xl,[s(d(ze))]),v("生活指数 ")]),a("ul",Yl,[(l(!0),t(m,null,p(d(b),((e,s)=>(l(),t("li",{key:s},[a("div",Zl,[a("span",et,[a("i",lt,[(l(),i(V(e.type)))])]),a("dl",null,[a("dd",tt,h(e.brf),1),a("dt",at,h(e.name),1)])])])))),128))])]),it])],2)),[[y,g.loading]]),s(Je,{onChange:X,cityId:r.value.location.id,modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=e=>f.value=e)},null,8,["cityId","modelValue"])])),_:1})}}});export{ot as default};
