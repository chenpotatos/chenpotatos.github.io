var _0x2bf1=['#app','initData','showImg','./images/hat/','头像加口罩','./images/kz/','forEach','len','data','push','.png','objData','cvs','type','imgData','form','style','$refs','upload','clearFiles','src','target','result','onload','img2Cvs','img','synthesis','readAsDataURL','raw','canvasFabric','$message','请先上传头像图片','warning','生成失败，请刷新浏览器或使用其他浏览器使用。','getElementsByClassName','img_','remove','inst','Image','width','height','#0b3a42','#fff','circle','add','clear','setWidth','setHeight','setBackgroundImage','createElement','base64ToBlob','HTMLEvents','initEvent','download','下载.png','href','createObjectURL','click','length','charCodeAt','prototype','small'];(function(_0x2f53f2,_0x50a282){var _0x54e25f=function(_0x43d078){while(--_0x43d078){_0x2f53f2['push'](_0x2f53f2['shift']());}};_0x54e25f(++_0x50a282);}(_0x2bf1,0x134));var _0x374d=function(_0x2e18f8,_0xa43348){_0x2e18f8=_0x2e18f8-0x0;var _0xc5878a=_0x2bf1[_0x2e18f8];return _0xc5878a;};Vue[_0x374d('0x0')]['$ELEMENT']={'size':_0x374d('0x1'),'zIndex':0xbb8};new Vue({'el':_0x374d('0x2'),'data':function(){return{'objData':[],'imgData':[],'form':{'type':0x1,'style':0x0,'avatar':null,'img':null},'cvs':null,'canvasFabric':null,'inst':null};},'created':function(){this[_0x374d('0x3')]();this[_0x374d('0x4')]();},'mounted':function(){},'methods':{'initData':function(){let _0x566c00=[{'type':0x1,'name':'头像加圣诞帽','len':0x13,'path':_0x374d('0x5'),'data':[]},{'type':0x2,'name':_0x374d('0x6'),'len':0xe,'path':_0x374d('0x7'),'data':[]},{'type':0x0,'name':'自定义遮罩图','len':-0x1,'data':[]}];_0x566c00[_0x374d('0x8')](_0x18c15d=>{for(let _0x111773=0x0;_0x111773<=_0x18c15d[_0x374d('0x9')];_0x111773++){_0x18c15d[_0x374d('0xa')][_0x374d('0xb')](_0x18c15d['path']+_0x111773+_0x374d('0xc'));}});this[_0x374d('0xd')]=_0x566c00;this[_0x374d('0xe')]=document['getElementById'](_0x374d('0xe'));this[_0x374d('0xe')]['getContext']('2d');},'showImg':function(){this[_0x374d('0xd')][_0x374d('0x8')](_0x45c16c=>{if(_0x45c16c['type']==this['form'][_0x374d('0xf')]){this[_0x374d('0x10')]=_0x45c16c['data'];}});this[_0x374d('0x11')][_0x374d('0x12')]=0x0;},'selAvatar':function(_0x50df30){this[_0x374d('0x13')][_0x374d('0x14')][_0x374d('0x15')]();let _0x2a5f4d=new FileReader();_0x2a5f4d['onload']=_0x77b349=>{let _0x44d219=new Image();_0x44d219[_0x374d('0x16')]=_0x77b349[_0x374d('0x17')][_0x374d('0x18')];_0x44d219[_0x374d('0x19')]=()=>{this['form']['avatar']=_0x44d219;this[_0x374d('0x1a')](_0x44d219);console['log'](_0x44d219);if(this[_0x374d('0x11')][_0x374d('0xf')]!=0x0||this[_0x374d('0x11')][_0x374d('0x1b')]){this[_0x374d('0x1c')]();}};};_0x2a5f4d['readAsDataURL'](_0x50df30['raw']);},'selPic':function(_0x29c9dc){this[_0x374d('0x13')]['pic']['clearFiles']();let _0x1aa731=new FileReader();_0x1aa731[_0x374d('0x1d')](_0x29c9dc[_0x374d('0x1e')]);_0x1aa731[_0x374d('0x19')]=_0x2d777c=>{let _0x55eea7=new Image();_0x55eea7['src']=_0x2d777c[_0x374d('0x17')]['result'];_0x55eea7[_0x374d('0x19')]=()=>{this[_0x374d('0x11')][_0x374d('0x1b')]=_0x55eea7;this[_0x374d('0x1c')]();};};},'synthesis':function(){if(!this[_0x374d('0x1f')]){this[_0x374d('0x20')]({'message':_0x374d('0x21'),'type':_0x374d('0x22')});return;}if(!this['canvasFabric']){this[_0x374d('0x20')]({'message':_0x374d('0x23'),'type':_0x374d('0x22')});return;}let _0xc076e3=null;if(this['form']['type']!=0x0){_0xc076e3=document[_0x374d('0x24')](_0x374d('0x25')+this['form'][_0x374d('0x12')])[0x0];}else{_0xc076e3=this[_0x374d('0x11')][_0x374d('0x1b')];}if(!_0xc076e3){this['$message']({'message':'生成失败，请选择上传遮盖的图片','type':'warning'});return;}if(!!this['inst']){this[_0x374d('0x1f')][_0x374d('0x26')](this['inst']);}let _0x26b47f=this[_0x374d('0xe')]['width']/0x2-0x32;this[_0x374d('0x27')]=new fabric[(_0x374d('0x28'))](_0xc076e3,{'top':0x32,'left':_0x26b47f,'scaleX':0x64/_0xc076e3[_0x374d('0x29')],'scaleY':0x64/_0xc076e3[_0x374d('0x2a')],'cornerColor':_0x374d('0x2b'),'cornerStrokeColor':_0x374d('0x2c'),'cornerStyle':_0x374d('0x2d'),'transparentCorners':![],'rotatingPointOffset':0xa});this[_0x374d('0x1f')][_0x374d('0x2e')](this[_0x374d('0x27')]);},'img2Cvs':function(_0x51c735){let _0x142408=0x280,_0x42177a=0xa0;let _0x528807=0x1;if(_0x51c735[_0x374d('0x29')]>_0x142408){_0x528807=0x1/(_0x51c735[_0x374d('0x29')]/_0x142408);}if(_0x51c735[_0x374d('0x29')]<_0x42177a){_0x528807=_0x42177a/_0x51c735[_0x374d('0x29')];}this[_0x374d('0xe')][_0x374d('0x29')]=_0x51c735[_0x374d('0x29')]*_0x528807;this[_0x374d('0xe')][_0x374d('0x2a')]=_0x51c735[_0x374d('0x2a')]*_0x528807;if(!!this['canvasFabric']){this[_0x374d('0x1f')][_0x374d('0x2f')]();}else{this[_0x374d('0x1f')]=new fabric['Canvas'](_0x374d('0xe'));}this[_0x374d('0x1f')][_0x374d('0x30')](this[_0x374d('0xe')][_0x374d('0x29')]);this[_0x374d('0x1f')][_0x374d('0x31')](this[_0x374d('0xe')][_0x374d('0x2a')]);let _0x1d5980=new fabric[(_0x374d('0x28'))](_0x51c735,{'scaleX':_0x528807,'scaleY':_0x528807});this[_0x374d('0x1f')][_0x374d('0x32')](_0x1d5980);},'downPic':function(){if(!this['canvasFabric']){this['$message']({'message':_0x374d('0x21'),'type':'warning'});return;}let _0x7272b7=this[_0x374d('0x1f')]['toDataURL']();let _0x44268a=document[_0x374d('0x33')]('a');let _0x2a48f1=this[_0x374d('0x34')](_0x7272b7);let _0x256e64=document['createEvent'](_0x374d('0x35'));_0x256e64[_0x374d('0x36')]('click',!![],!![]);_0x44268a[_0x374d('0x37')]=_0x374d('0x38');_0x44268a[_0x374d('0x39')]=URL[_0x374d('0x3a')](_0x2a48f1);_0x44268a[_0x374d('0x3b')]();},'base64ToBlob':function(_0x429c6f){let _0x5f01c9=_0x429c6f['split'](';base64,');let _0x689c7c=_0x5f01c9[0x0]['split'](':')[0x1];let _0x660d21=window['atob'](_0x5f01c9[0x1]);let _0x18826e=_0x660d21[_0x374d('0x3c')];let _0x2b5434=new Uint8Array(_0x18826e);for(let _0x2006ea=0x0;_0x2006ea<_0x18826e;++_0x2006ea){_0x2b5434[_0x2006ea]=_0x660d21[_0x374d('0x3d')](_0x2006ea);}return new Blob([_0x2b5434],{'type':_0x689c7c});}}});