import{g as e,ap as t,aa as a,N as o,aq as n,ai as l,c as s,am as i,ah as r,w as u,R as p,P as d,ar as c,m as f,s as v,o as m,b as y,j as x,K as b,i as g,e as h,S as w,h as S,t as k,J as z,D as $,ao as C,k as I,q as j,as as E,x as P,n as F,al as V,at as M}from"./el-select.b78411e2.js";import{b as _,d as B,E as N,_ as R,w as A}from"./index.c511a369.js";import{v as H,h as O,e as T}from"./index.389214ec.js";import{b as K,u as W,d as q}from"./index.e2562b21.js";import{i as D,V as L}from"./icon.e5ddc463.js";import{m as J}from"./typescript.72bf8adc.js";import{U,i as G}from"./focus-trap.37f37187.js";import{u as Q}from"./index.34bbf0a0.js";import{u as X,a as Y}from"./index.d0852ddf.js";import{u as Z}from"./index.48a3615c.js";import{d as ee}from"./error.7e8331f1.js";const te=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e);let ae;const oe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function ne(e,a=1,o){var n;ae||(ae=document.createElement("textarea"),document.body.appendChild(ae));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:oe.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);ae.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ae.value=e.value||e.placeholder||"";let u=ae.scrollHeight;const p={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),ae.value="";const d=ae.scrollHeight-l;if(t(a)){let e=d*a;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),p.minHeight=`${e}px`}if(t(o)){let e=d*o;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return p.height=`${u}px`,null==(n=ae.parentNode)||n.removeChild(ae),ae=void 0,p}const le=_({id:{type:String,default:void 0},size:K,disabled:Boolean,modelValue:{type:B([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:B([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:D},prefixIcon:{type:D},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:B([Object,Array,String]),default:()=>J({})}}),se={[U]:e=>a(e),input:e=>a(e),change:e=>a(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ie=["role"],re=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],ue=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],pe=o({name:"ElInput",inheritAttrs:!1});const de=A(R(o({...pe,props:le,emits:se,setup(t,{expose:a,emit:o}){const _=t,B=n(),R=l(),A=s((()=>{const e={};return"combobox"===_.containerRole&&(e["aria-haspopup"]=B["aria-haspopup"],e["aria-owns"]=B["aria-owns"],e["aria-expanded"]=B["aria-expanded"]),e})),K=Q({excludeKeys:s((()=>Object.keys(A.value)))}),{form:D,formItem:J}=X(),{inputId:ae}=Y(_,{formItemContext:J}),oe=W(),le=q(),se=Z("input"),pe=Z("textarea"),de=i(),ce=i(),fe=e(!1),ve=e(!1),me=e(!1),ye=e(!1),xe=e(),be=i(_.inputStyle),ge=s((()=>de.value||ce.value)),he=s((()=>{var e;return null!=(e=null==D?void 0:D.statusIcon)&&e})),we=s((()=>(null==J?void 0:J.validateState)||"")),Se=s((()=>we.value&&L[we.value])),ke=s((()=>ye.value?H:O)),ze=s((()=>[B.style,_.inputStyle])),$e=s((()=>[_.inputStyle,be.value,{resize:_.resize}])),Ce=s((()=>G(_.modelValue)?"":String(_.modelValue))),Ie=s((()=>_.clearable&&!le.value&&!_.readonly&&!!Ce.value&&(fe.value||ve.value))),je=s((()=>_.showPassword&&!le.value&&!_.readonly&&!!Ce.value&&(!!Ce.value||fe.value))),Ee=s((()=>_.showWordLimit&&!!K.value.maxlength&&("text"===_.type||"textarea"===_.type)&&!le.value&&!_.readonly&&!_.showPassword)),Pe=s((()=>Array.from(Ce.value).length)),Fe=s((()=>!!Ee.value&&Pe.value>Number(K.value.maxlength))),Ve=s((()=>!!R.suffix||!!_.suffixIcon||Ie.value||_.showPassword||Ee.value||!!we.value&&he.value)),[Me,_e]=function(t){const a=e();return[function(){if(null==t.value)return;const{selectionStart:e,selectionEnd:o,value:n}=t.value;if(null==e||null==o)return;const l=n.slice(0,Math.max(0,e)),s=n.slice(Math.max(0,o));a.value={selectionStart:e,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==t.value||null==a.value)return;const{value:e}=t.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=a.value;if(null==o||null==n||null==l)return;let s=e.length;if(e.endsWith(n))s=e.length-n.length;else if(e.startsWith(o))s=o.length;else{const t=o[l-1],a=e.indexOf(t,l-1);-1!==a&&(s=a+1)}t.value.setSelectionRange(s,s)}]}(de);r(ce,(e=>{if(!Ee.value||"both"!==_.resize)return;const t=e[0],{width:a}=t.contentRect;xe.value={right:`calc(100% - ${a+15+6}px)`}}));const Be=()=>{const{type:e,autosize:t}=_;if(V&&"textarea"===e)if(t){const e=M(t)?t.minRows:void 0,a=M(t)?t.maxRows:void 0;be.value={...ne(ce.value,e,a)}}else be.value={minHeight:ne(ce.value).minHeight}},Ne=()=>{const e=ge.value;e&&e.value!==Ce.value&&(e.value=Ce.value)},Re=async e=>{Me();let{value:t}=e.target;_.formatter&&(t=_.parser?_.parser(t):t,t=_.formatter(t)),me.value||(t!==Ce.value?(o(U,t),o("input",t),await p(),Ne(),_e()):Ne())},Ae=e=>{o("change",e.target.value)},He=e=>{o("compositionstart",e),me.value=!0},Oe=e=>{var t;o("compositionupdate",e);const a=null==(t=e.target)?void 0:t.value,n=a[a.length-1]||"";me.value=!te(n)},Te=e=>{o("compositionend",e),me.value&&(me.value=!1,Re(e))},Ke=()=>{ye.value=!ye.value,We()},We=async()=>{var e;await p(),null==(e=ge.value)||e.focus()},qe=e=>{fe.value=!0,o("focus",e)},De=e=>{var t;fe.value=!1,o("blur",e),_.validateEvent&&(null==(t=null==J?void 0:J.validate)||t.call(J,"blur").catch((e=>ee())))},Le=e=>{ve.value=!1,o("mouseleave",e)},Je=e=>{ve.value=!0,o("mouseenter",e)},Ue=e=>{o("keydown",e)},Ge=()=>{o(U,""),o("change",""),o("clear"),o("input","")};return u((()=>_.modelValue),(()=>{var e;p((()=>Be())),_.validateEvent&&(null==(e=null==J?void 0:J.validate)||e.call(J,"change").catch((e=>ee())))})),u(Ce,(()=>Ne())),u((()=>_.type),(async()=>{await p(),Ne(),Be()})),d((()=>{!_.formatter&&_.parser,Ne(),p(Be)})),a({input:de,textarea:ce,ref:ge,textareaStyle:$e,autosize:c(_,"autosize"),focus:We,blur:()=>{var e;return null==(e=ge.value)?void 0:e.blur()},select:()=>{var e;null==(e=ge.value)||e.select()},clear:Ge,resizeTextarea:Be}),(e,t)=>f((m(),y("div",C(h(A),{class:["textarea"===e.type?h(pe).b():h(se).b(),h(se).m(h(oe)),h(se).is("disabled",h(le)),h(se).is("exceed",h(Fe)),{[h(se).b("group")]:e.$slots.prepend||e.$slots.append,[h(se).bm("group","append")]:e.$slots.append,[h(se).bm("group","prepend")]:e.$slots.prepend,[h(se).m("prefix")]:e.$slots.prefix||e.prefixIcon,[h(se).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[h(se).bm("suffix","password-clear")]:h(Ie)&&h(je)},e.$attrs.class],style:h(ze),role:e.containerRole,onMouseenter:Je,onMouseleave:Le}),[x(" input "),"textarea"!==e.type?(m(),y(b,{key:0},[x(" prepend slot "),e.$slots.prepend?(m(),y("div",{key:0,class:g(h(se).be("group","prepend"))},[w(e.$slots,"prepend")],2)):x("v-if",!0),S("div",{class:g([h(se).e("wrapper"),h(se).is("focus",fe.value)])},[x(" prefix slot "),e.$slots.prefix||e.prefixIcon?(m(),y("span",{key:0,class:g(h(se).e("prefix"))},[S("span",{class:g(h(se).e("prefix-inner"))},[w(e.$slots,"prefix"),e.prefixIcon?(m(),k(h(N),{key:0,class:g(h(se).e("icon"))},{default:z((()=>[(m(),k($(e.prefixIcon)))])),_:1},8,["class"])):x("v-if",!0)],2)],2)):x("v-if",!0),S("input",C({id:h(ae),ref_key:"input",ref:de,class:h(se).e("inner")},h(K),{type:e.showPassword?ye.value?"text":"password":e.type,disabled:h(le),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:_.form,onCompositionstart:He,onCompositionupdate:Oe,onCompositionend:Te,onInput:Re,onFocus:qe,onBlur:De,onChange:Ae,onKeydown:Ue}),null,16,re),x(" suffix slot "),h(Ve)?(m(),y("span",{key:1,class:g(h(se).e("suffix"))},[S("span",{class:g(h(se).e("suffix-inner"))},[h(Ie)&&h(je)&&h(Ee)?x("v-if",!0):(m(),y(b,{key:0},[w(e.$slots,"suffix"),e.suffixIcon?(m(),k(h(N),{key:0,class:g(h(se).e("icon"))},{default:z((()=>[(m(),k($(e.suffixIcon)))])),_:1},8,["class"])):x("v-if",!0)],64)),h(Ie)?(m(),k(h(N),{key:1,class:g([h(se).e("icon"),h(se).e("clear")]),onMousedown:j(h(E),["prevent"]),onClick:Ge},{default:z((()=>[I(h(T))])),_:1},8,["class","onMousedown"])):x("v-if",!0),h(je)?(m(),k(h(N),{key:2,class:g([h(se).e("icon"),h(se).e("password")]),onClick:Ke},{default:z((()=>[(m(),k($(h(ke))))])),_:1},8,["class"])):x("v-if",!0),h(Ee)?(m(),y("span",{key:3,class:g(h(se).e("count"))},[S("span",{class:g(h(se).e("count-inner"))},P(h(Pe))+" / "+P(h(K).maxlength),3)],2)):x("v-if",!0),h(we)&&h(Se)&&h(he)?(m(),k(h(N),{key:4,class:g([h(se).e("icon"),h(se).e("validateIcon"),h(se).is("loading","validating"===h(we))])},{default:z((()=>[(m(),k($(h(Se))))])),_:1},8,["class"])):x("v-if",!0)],2)],2)):x("v-if",!0)],2),x(" append slot "),e.$slots.append?(m(),y("div",{key:1,class:g(h(se).be("group","append"))},[w(e.$slots,"append")],2)):x("v-if",!0)],64)):(m(),y(b,{key:1},[x(" textarea "),S("textarea",C({id:h(ae),ref_key:"textarea",ref:ce,class:h(pe).e("inner")},h(K),{tabindex:e.tabindex,disabled:h(le),readonly:e.readonly,autocomplete:e.autocomplete,style:h($e),"aria-label":e.label,placeholder:e.placeholder,form:_.form,onCompositionstart:He,onCompositionupdate:Oe,onCompositionend:Te,onInput:Re,onFocus:qe,onBlur:De,onChange:Ae,onKeydown:Ue}),null,16,ue),h(Ee)?(m(),y("span",{key:0,style:F(xe.value),class:g(h(se).e("count"))},P(h(Pe))+" / "+P(h(K).maxlength),7)):x("v-if",!0)],64))],16,ie)),[[v,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{de as E,te as i};
