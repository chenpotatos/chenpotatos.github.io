import{N as e,o as t,t as a,k as s,b as l,h as i,a as o,u as r,z as c,c as d,bl as n,w as p,_ as m,V as u,J as f,e as y,K as h,L as b,i as g,C as j,x,q as w,T as k,m as v,s as _}from"./el-select.b78411e2.js";import{D as C}from"./d-icon.cb7b438a.js";import{_ as D}from"./d-dialog.04f0d663.js";/* empty css                   */import{E as I}from"./el-skeleton-item.ad47a992.js";/* empty css                */import{getTopListApi as T,getTopCategoryApi as z}from"./topsearch.c83bbb7d.js";import{D as E}from"./vuedraggable.umd.d01db7e4.js";import{E as V,a as L}from"./index.f8fe0371.js";import{E as S}from"./index.c7cdc822.js";import{a3 as W}from"./main.4e240c16.js";import{S as O}from"./Select.e99c6d44.js";import{ElMessage as A}from"./index.267059ee.js";import"./el-dialog.64bc625d.js";import"./index.c511a369.js";import"./index.48a3615c.js";import"./isObject.a01dee34.js";import"./style.7be20351.js";import"./icon.e5ddc463.js";import"./index.389214ec.js";import"./index.d2069d58.js";import"./focus-trap.37f37187.js";import"./aria.66f3f71c.js";import"./index.9a99ea33.js";import"./index.502472ff.js";import"./error.7e8331f1.js";import"./scroll.64fda821.js";/* empty css                   */import"./Close.c8424ab4.js";import"./baseRequest.da51274f.js";import"./axios.91e25212.js";import"./version.8d34b113.js";import"./sortable.esm.bf8db74c.js";import"./typescript.72bf8adc.js";import"./strings.71c48fcd.js";import"./index.e2562b21.js";import"./index.34bbf0a0.js";import"./index.d0852ddf.js";import"./config-provider.551e79dd.js";var M=e({name:"InfoFilled"});const R={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},q=s("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1);M.render=function(e,s,l,i,o,r){return t(),a("svg",R,[q])},M.__file="packages/components/InfoFilled.vue";const B=M,F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},P=[i("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2s.9-2 2-2s2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2s-2 .9-2 2s.9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2z",fill:"currentColor"},null,-1)],U=e({name:"DragIndicatorOutlined",render:function(e,a){return t(),l("svg",F,P)}}),J={class:"topsearch-content hfull"},K={class:"d-flex-center",style:{height:"30px","flex-flow":"row"}},N={class:"pl20 pr20"},$={class:"d-layout hfull",style:{height:"calc(100% - 86px)","border-top":"1px solid rgba(var(--alpha-color), 0.04)"}},G={class:"d-layout-aside topsearch-aside",style:{width:"21%","min-width":"140px"}},H=["onClick"],Q={title:"拖动",class:"d-icon f20 mr5 handle"},X=["title"],Y=["src"],Z=["onClick"],ee=["title"],te=["src"],ae={class:"d-layout-content mt10 d-auto-y ml20",style:""},se={class:"category-title d-flex-y"},le=["src"],ie={class:"d-cell"},oe={class:"topsearch-body"},re=["href"],ce={class:"item-index mr10"},de=["title"],ne={class:"f12 ml20 d-sub"},pe={name:"appTopsearch"},me=o(Object.assign(pe,{setup(e){const o=r(),M=c({keyWord:"",category:"我的订阅",hotType:[],hostList:[],typeId:"",loading:!1,rowData:{},subscribeData:[]}),R=d((()=>[{category:"我的订阅"},{category:"全部"},...n(M.hotType,"category")]));function q(){M.subscribeData.map((e=>({id:e.id,name:e.name}))).forEach(((e,t)=>{o.value.topSearch.splice(t,1,e)}))}const F=(e,t)=>{let a="取消订阅";if("add"==t){if(o.value.topSearch.length>4)return void A.error("最多只能选择5条");o.value.topSearch.push({name:e.name,id:e.id}),a="订阅成功"}else{if(o.value.topSearch.length<2)return void A.error("至少选择1条");let t=o.value.topSearch.findIndex((t=>t.id===e.id));o.value.topSearch.splice(t,1)}A.success(a),me()},P=d((()=>o.value.topSearch.map((e=>e.id)))),pe=d((()=>M.keyWord?(M.category="全部",M.hotType.filter((e=>e.name.includes(M.keyWord)))):"全部"!=M.category?M.hotType.filter((e=>e.category==M.category)):M.hotType));p((()=>pe.value),(e=>{e.length&&(M.typeId=e[0].id,M.rowData=e[0],ue())}));function me(){M.subscribeData=P.value.reduce(((e,t)=>[...e,M.hotType.find((e=>e.id==t))||{}]),[]),"我的订阅"==M.category&&fe(M.subscribeData[0])}async function ue(){M.loading=!0;let e=`searchTopList_${M.typeId}`,t=await m((()=>import("./indexdb.57862a78.js")),["./indexdb.57862a78.js","./localforage.60f13183.js","./el-select.b78411e2.js","./el-select.b0658523.css","./_commonjs-dynamic-modules.30ae7933.js"],import.meta.url);t=t.default;let a=await t.getItem(e);M.hostList=a.data||[],M.loading=!1,a.isExp&&T({id:M.typeId}).then((a=>{let s=a.data||[];s.length&&t.set(e,s,6e5),M.hostList=s})).finally((()=>{M.loading=!1}))}function fe(e){M.rowData=e,M.typeId=e.id,ue()}return(async()=>{let e=await m((()=>import("./indexdb.57862a78.js")),["./indexdb.57862a78.js","./localforage.60f13183.js","./el-select.b78411e2.js","./el-select.b0658523.css","./_commonjs-dynamic-modules.30ae7933.js"],import.meta.url);e=e.default;let t=await e.getItem("searchTopCategory");M.hotType=t.data||[],me(),t.isExp&&z().then((t=>{let a=t.data||[];M.hotType=a,a.length&&(e.set("searchTopCategory",a,5184e5),me())}))})(),(e,o)=>{const r=u("el-icon");return t(),a(D,{height:"600px"},{default:f((()=>[i("div",J,[i("p",K,[s(C,{icon:"icon-hotsearch ",size:"80"})]),i("div",N,[s(y(V),{onTabClick:o[0]||(o[0]=e=>M.keyWord=""),modelValue:M.category,"onUpdate:modelValue":o[1]||(o[1]=e=>M.category=e)},{default:f((()=>[(t(!0),l(h,null,b(y(R),(e=>(t(),a(y(L),{label:e.category,name:e.category,key:e.key},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])]),i("div",$,[i("div",G,[s(y(S),{modelValue:M.keyWord,"onUpdate:modelValue":o[2]||(o[2]=e=>M.keyWord=e),style:{margin:"5px",width:"90%"},size:"small",placeholder:"搜索",clearable:""},null,8,["modelValue"]),"我的订阅"==M.category?(t(),a(y(E),{key:0,class:"d-left-tabs","component-data":{tag:"ul",name:"flip-list"},list:M.subscribeData,animation:"300",group:"icon-list","item-key":"id",onEnd:q},{item:f((({element:e})=>[i("li",{class:g(["d-left-tabs-item d-flex-between subscribe-item",{active:M.typeId==e.id}]),onClick:t=>fe(e),style:{transition:"none"}},[i("i",Q,[s(y(U))]),i("span",{title:e.name,class:"d-elip",style:{width:"102%"}},[i("img",{class:"icon",src:e.icon,alt:""},null,8,Y),j(" "+x(e.name),1)],8,X),s(r,{title:"订阅在小组件上显示",class:"tabs-item-select"},{default:f((()=>[s(y(W),{onClick:w((t=>F(e,"del")),["stop"])},null,8,["onClick"])])),_:2},1024)],10,H)])),_:1},8,["list"])):(t(),a(k,{key:1,name:"flip-list",tag:"ul",class:"d-left-tabs"},{default:f((()=>[(t(!0),l(h,null,b(y(pe),(e=>(t(),l("li",{class:g(["d-left-tabs-item d-flex-between",{active:M.typeId==e.id}]),onClick:t=>fe(e),key:e.id},[i("span",{title:e.name,class:"d-elip",style:{width:"102%"}},[i("img",{class:"icon",src:e.icon,alt:""},null,8,te),j(" "+x(e.name),1)],8,ee),v(s(r,{title:"订阅在小组件上显示",class:"tabs-item-select"},{default:f((()=>[y(P).includes(e.id)?(t(),a(y(W),{key:1,onClick:w((t=>F(e,"del")),["stop"])},null,8,["onClick"])):(t(),a(y(O),{key:0,onClick:w((t=>F(e,"add")),["stop"])},null,8,["onClick"]))])),_:2},1536),[[_,y(P).includes(e.id)]])],10,Z)))),128))])),_:1}))]),i("div",ae,[i("h2",se,[i("img",{src:M.rowData.icon,alt:""},null,8,le),i("span",ie,x(M.rowData.name)+" ‧ "+x(M.rowData.type),1),s(r,{class:"mr20 d-sub",size:"16",title:"本热搜榜单所陈列的热点信息采集自于互联网，我们不对数据源做任何处理，服务器也不会存储任何数据, 链接均跳转至原始网页地址访问. 如果侵犯您的权益,请与我联系,我会尽快处理。同时请大家自行甄别信息真伪,原始网站信息不代表本人及本产品观点.谢谢大家支持."},{default:f((()=>[s(y(B))])),_:1})]),i("ul",oe,[s(y(I),{loading:M.loading,rows:3,count:1,animated:""},{default:f((()=>[(t(!0),l(h,null,b(M.hostList,((e,a)=>(t(),l("a",{class:"topsearch-item d-flex-y",href:e.link,key:a,target:"_blank"},[i("span",ce,x(e.index),1),i("span",{class:"d-felx d-cell d-elip",title:e.title},x(e.title),9,de),i("em",ne,x(e.hotValue),1)],8,re)))),128))])),_:1},8,["loading"])])])])])])),_:1})}}}),[["__scopeId","data-v-624b8c5e"]]);export{me as default};
