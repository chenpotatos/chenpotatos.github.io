import{b as e,d as a,_ as t,E as l,e as s,w as o,a as n}from"./index.c511a369.js";import{k as r,m as i,d as u,H as c}from"./index.389214ec.js";import{N as d,a5 as p,g as b,w as v,R as m,ah as f,o as g,b as y,i as h,e as w,n as x,F as $,bi as P,bj as k,c as N,P as T,ag as C,k as E,aR as S,aP as B,am as j,ac as R,S as A,aa as F,ap as _,ai as K,bk as L,z,Q as V,m as q,s as H,j as M}from"./el-select.b78411e2.js";import{m as U}from"./typescript.72bf8adc.js";import{t as O}from"./error.7e8331f1.js";import{u as Q}from"./index.48a3615c.js";import{c as W}from"./strings.71c48fcd.js";import{E as X}from"./aria.66f3f71c.js";import{g as Y}from"./el-dialog.64bc625d.js";import{U as D}from"./focus-trap.37f37187.js";import{a as G}from"./index.502472ff.js";const I=Symbol("tabsRootContextKey"),J=e({tabs:{type:a(Array),default:()=>U([])}}),Z=d({name:"ElTabBar"});var ee=t(d({...Z,props:J,setup(e,{expose:a}){const t=e,l=$(),s=p(I);s||O("ElTabBar","<el-tabs><el-tab-bar /></el-tabs>");const o=Q("tabs"),n=b(),r=b(),i=()=>r.value=(()=>{let e=0,a=0;const o=["top","bottom"].includes(s.props.tabPosition)?"width":"height",n="width"===o?"x":"y";return t.tabs.every((s=>{var r,i,u,c;const d=null==(i=null==(r=l.parent)?void 0:r.refs)?void 0:i[`tab-${s.uid}`];if(!d)return!1;if(!s.active)return!0;a=d[`client${W(o)}`];const p="x"===n?"left":"top";e=d[`offset${W(p)}`]-(null!=(c=null==(u=d.parentElement)?void 0:u[`offset${W(p)}`])?c:0);const b=d.closest(".is-scrollable");if(b){const a=window.getComputedStyle(b);e+=Number.parseFloat(a[`padding${W(p)}`])}const v=window.getComputedStyle(d);return"width"===o&&(t.tabs.length>1&&(a-=Number.parseFloat(v.paddingLeft)+Number.parseFloat(v.paddingRight)),e+=Number.parseFloat(v.paddingLeft)),!1})),{[o]:`${a}px`,transform:`translate${W(n)}(${e}px)`}})();return v((()=>t.tabs),(async()=>{await m(),i()}),{immediate:!0}),f(n,(()=>i())),a({ref:n,update:i}),(e,a)=>(g(),y("div",{ref_key:"barRef",ref:n,class:h([w(o).e("active-bar"),w(o).is(w(s).props.tabPosition)]),style:x(r.value)},null,6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const ae=e({panes:{type:a(Array),default:()=>U([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),te=d({name:"ElTabNav",props:ae,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const s=$(),o=p(I);o||O("ElTabNav","<el-tabs><tab-nav /></el-tabs>");const n=Q("tabs"),c=P(),d=k(),g=b(),y=b(),h=b(),w=b(!1),x=b(0),S=b(!1),B=b(!0),j=N((()=>["top","bottom"].includes(o.props.tabPosition)?"width":"height")),R=N((()=>({transform:`translate${"width"===j.value?"X":"Y"}(-${x.value}px)`}))),A=()=>{if(!g.value)return;const e=g.value[`offset${W(j.value)}`],a=x.value;if(!a)return;const t=a>e?a-e:0;x.value=t},F=()=>{if(!g.value||!y.value)return;const e=y.value[`offset${W(j.value)}`],a=g.value[`offset${W(j.value)}`],t=x.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;x.value=l},_=async()=>{const e=y.value;if(!(w.value&&h.value&&g.value&&e))return;await m();const a=h.value.querySelector(".is-active");if(!a)return;const t=g.value,l=["top","bottom"].includes(o.props.tabPosition),s=a.getBoundingClientRect(),n=t.getBoundingClientRect(),r=l?e.offsetWidth-n.width:e.offsetHeight-n.height,i=x.value;let u=i;l?(s.left<n.left&&(u=i-(n.left-s.left)),s.right>n.right&&(u=i+s.right-n.right)):(s.top<n.top&&(u=i-(n.top-s.top)),s.bottom>n.bottom&&(u=i+(s.bottom-n.bottom))),u=Math.max(u,0),x.value=Math.min(u,r)},K=()=>{if(!y.value||!g.value)return;const e=y.value[`offset${W(j.value)}`],a=g.value[`offset${W(j.value)}`],t=x.value;if(a<e){const t=x.value;w.value=w.value||{},w.value.prev=t,w.value.next=t+a<e,e-t<a&&(x.value=e-a)}else w.value=!1,t>0&&(x.value=0)},L=e=>{const a=e.code,{up:t,down:l,left:s,right:o}=X;if(![t,l,s,o].includes(a))return;const n=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),r=n.indexOf(e.target);let i;i=a===s||a===t?0===r?n.length-1:r-1:r<n.length-1?r+1:0,n[i].focus({preventScroll:!0}),n[i].click(),z()},z=()=>{B.value&&(S.value=!0)},V=()=>S.value=!1;return v(c,(e=>{"hidden"===e?B.value=!1:"visible"===e&&setTimeout((()=>B.value=!0),50)})),v(d,(e=>{e?setTimeout((()=>B.value=!0),50):B.value=!1})),f(h,K),T((()=>setTimeout((()=>_()),0))),C((()=>K())),a({scrollToActiveTab:_,removeFocus:V}),v((()=>e.panes),(()=>s.update()),{flush:"post"}),()=>{const a=w.value?[E("span",{class:[n.e("nav-prev"),n.is("disabled",!w.value.prev)],onClick:A},[E(l,null,{default:()=>[E(r,null,null)]})]),E("span",{class:[n.e("nav-next"),n.is("disabled",!w.value.next)],onClick:F},[E(l,null,{default:()=>[E(i,null,null)]})])]:null,s=e.panes.map(((a,s)=>{var r,i,c,d;const p=a.uid,b=a.props.disabled,v=null!=(i=null!=(r=a.props.name)?r:a.index)?i:`${s}`,m=!b&&(a.isClosable||e.editable);a.index=`${s}`;const f=m?E(l,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[E(u,null,null)]}):null,g=(null==(d=(c=a.slots).label)?void 0:d.call(c))||a.props.label,y=!b&&a.active?0:-1;return E("div",{ref:`tab-${p}`,class:[n.e("item"),n.is(o.props.tabPosition),n.is("active",a.active),n.is("disabled",b),n.is("closable",m),n.is("focus",S.value)],id:`tab-${v}`,key:`tab-${p}`,"aria-controls":`pane-${v}`,role:"tab","aria-selected":a.active,tabindex:y,onFocus:()=>z(),onBlur:()=>V(),onClick:e=>{V(),t("tabClick",a,v,e)},onKeydown:e=>{!m||e.code!==X.delete&&e.code!==X.backspace||t("tabRemove",a,e)}},[g,f])}));return E("div",{ref:h,class:[n.e("nav-wrap"),n.is("scrollable",!!w.value),n.is(o.props.tabPosition)]},[a,E("div",{class:n.e("nav-scroll"),ref:g},[E("div",{class:[n.e("nav"),n.is(o.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(o.props.tabPosition))],ref:y,style:R.value,role:"tablist",onKeydown:L},[e.type?null:E(ee,{tabs:[...e.panes]},null),s])])])}}}),le=(e,a)=>{const t=(e=>Y(e.subTree).filter((e=>{var a;return S(e)&&"ElTabPane"===(null==(a=e.type)?void 0:a.name)&&!!e.component})))(e);return t.map((e=>e.component.uid)).map((e=>a[e])).filter((e=>!!e))},se=e({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:a(Function),default:()=>!0},stretch:Boolean}),oe=e=>F(e)||_(e);var ne=d({name:"ElTabs",props:se,emits:{[D]:e=>oe(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>oe(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>oe(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:o}){var n,r;const i=$(),u=Q("tabs"),d=b(),p=B({}),f=j([]),g=b(null!=(r=null!=(n=e.modelValue)?n:e.activeName)?r:"0"),y=async t=>{var l,o,n;if(g.value!==t&&!s(t))try{!1!==await(null==(l=e.beforeLeave)?void 0:l.call(e,t,g.value))&&((e=>{g.value=e,a(D,e),a("tabChange",e)})(t),null==(n=null==(o=d.value)?void 0:o.removeFocus)||n.call(o))}catch(r){}},h=(e,t,l)=>{e.props.disabled||(y(t),a("tabClick",e,l))},w=(e,t)=>{e.props.disabled||s(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},x=()=>{a("edit",void 0,"add"),a("tabAdd")};G({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},N((()=>!!e.activeName))),v((()=>e.activeName),(e=>y(e))),v((()=>e.modelValue),(e=>y(e))),v(g,(async()=>{var e;await m(),null==(e=d.value)||e.scrollToActiveTab()}));R(I,{props:e,currentName:g,registerPane:e=>{p[e.uid]=e,f.value=le(i,p)},unregisterPane:e=>{delete p[e],f.value=le(i,p)}});return o({currentName:g}),()=>{const a=e.editable||e.addable?E("span",{class:u.e("new-tab"),tabindex:"0",onClick:x,onKeydown:e=>{e.code===X.enter&&x()}},[E(l,{class:u.is("icon-plus")},{default:()=>[E(c,null,null)]})]):null,s=E("div",{class:[u.e("header"),u.is(e.tabPosition)]},[a,E(te,{ref:d,currentName:g.value,editable:e.editable,type:e.type,panes:f.value,stretch:e.stretch,onTabClick:h,onTabRemove:w},null)]),o=E("div",{class:u.e("content")},[A(t,"default")]);return E("div",{class:[u.b(),u.m(e.tabPosition),{[u.m("card")]:"card"===e.type,[u.m("border-card")]:"border-card"===e.type}]},[..."bottom"!==e.tabPosition?[s,o]:[o,s]])}}});const re=e({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ie=["id","aria-hidden","aria-labelledby"],ue=d({name:"ElTabPane"});var ce=t(d({...ue,props:re,setup(e){const a=e,t=$(),l=K(),s=p(I);s||O("ElTabPane","usage: <el-tabs><el-tab-pane /></el-tabs/>");const o=Q("tab-pane"),n=b(),r=N((()=>a.closable||s.props.closable)),i=L((()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:n.value)})),u=b(i.value),c=N((()=>{var e;return null!=(e=a.name)?e:n.value})),d=L((()=>!a.lazy||u.value||i.value));v(i,(e=>{e&&(u.value=!0)}));const m=z({uid:t.uid,slots:l,props:a,paneName:c,active:i,index:n,isClosable:r});return T((()=>{s.registerPane(m)})),V((()=>{s.unregisterPane(m.uid)})),(e,a)=>w(d)?q((g(),y("div",{key:0,id:`pane-${w(c)}`,class:h(w(o).b()),role:"tabpanel","aria-hidden":!w(i),"aria-labelledby":`tab-${w(c)}`},[A(e.$slots,"default")],10,ie)),[[H,w(i)]]):M("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const de=o(ne,{TabPane:ce}),pe=n(ce);export{de as E,pe as a};
