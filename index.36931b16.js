import{_ as e}from"./d-dialog.04f0d663.js";import{N as t,o as i,t as s,k as a,b as o,h as n,a as r,g as l,d,z as c,l as m,R as p,Q as f,J as u,K as j,L as w,e as g,x as b,i as x,q as y,C as h,n as z,au as v}from"./el-select.b78411e2.js";/* empty css                   */import L from"./eventBus.68d45896.js";import{a as k}from"./timezone.b93f5449.js";import{a as C}from"./utc.5dd0d0ae.js";import{a4 as _}from"./main.4e240c16.js";import"./zh-cn.e235e75e.js";import{w as A,d as I}from"./dayOfYear.268cbabe.js";import{b as O}from"./weatherApi.9b943a5a.js";import R from"./indexdb.57862a78.js";import{a as Y,E,b as $}from"./index.60081c78.js";import{ElMessage as H}from"./index.267059ee.js";import"./el-dialog.64bc625d.js";import"./index.c511a369.js";import"./index.48a3615c.js";import"./isObject.a01dee34.js";import"./style.7be20351.js";import"./icon.e5ddc463.js";import"./index.389214ec.js";import"./index.d2069d58.js";import"./focus-trap.37f37187.js";import"./aria.66f3f71c.js";import"./index.9a99ea33.js";import"./index.502472ff.js";import"./error.7e8331f1.js";import"./scroll.64fda821.js";/* empty css                   */import"./Close.c8424ab4.js";import"./axios.91e25212.js";import"./baseRequest.da51274f.js";import"./version.8d34b113.js";import"./localforage.60f13183.js";import"./_commonjs-dynamic-modules.30ae7933.js";import"./index.007a0b27.js";import"./index.e2562b21.js";import"./index.c7cdc822.js";import"./typescript.72bf8adc.js";import"./index.34bbf0a0.js";import"./index.d0852ddf.js";import"./index.9bab3cd4.js";import"./strings.71c48fcd.js";import"./isEqual.7e5ed192.js";import"./_baseIsEqual.4b13025e.js";import"./_Uint8Array.e97e1f00.js";import"./_arrayPush.949d1e07.js";import"./debounce.abbfdaeb.js";import"./index.62a578ca.js";import"./validator.56de5fb2.js";import"./config-provider.551e79dd.js";var q=t({name:"RemoveFilled"});const F={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},M=a("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zM288 512a38.4 38.4 0 0 0 38.4 38.4h371.2a38.4 38.4 0 0 0 0-76.8H326.4A38.4 38.4 0 0 0 288 512z"},null,-1);q.render=function(e,t,a,o,n,r){return i(),s("svg",F,[M])},q.__file="packages/components/RemoveFilled.vue";const S=q,V={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},B=[n("path",{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"},null,-1)],N=t({name:"RefreshTwotone",render:function(e,t){return i(),o("svg",V,B)}}),P={class:"ar"},D={class:"curr-timezone ac"},K={class:"ar f16 mt10 d-sub",style:{"margin-right":"110px"}},T={class:"fr mt20 ar",style:{"margin-right":"110px"}},U={class:"timezone-list d-inline"},J=["onClick"],Q=["onClick"],G={class:"b d-elip d-block"},W={class:"mt20 d-hidden",style:{clear:"both"}},X={name:"yiyan-icon"},Z=r(Object.assign(X,{props:{size:String},setup(e){const t=e,r=l(null);d.extend(A),d.extend(I),d.locale("zh-cn"),d.extend(C),d.extend(k);const q=l("");function F(e=""){return e?d().tz(e).format("HH:mm"):d().format("HH:mm:ss")}const M=[{name:"洛杉矶",code:"America/Los_Angeles"},{name:"纽约",code:"America/New_York"},{name:"伦敦",code:"Europe/London"},{name:"巴黎",code:"Europe/Paris"},{name:"基辅",code:"Europe/Kiev"},{name:"北京",code:"Asia/Shanghai"},{name:"东京",code:"Asia/Tokyo"}],V=c({fontFamily:"",cityList:[],cityId:"",cityOptions:[],tzList:[],widgetList:m.get("app-worldClock")||[{name:"北京",code:"Asia/Shanghai"},{name:"洛杉矶",code:"America/Los_Angeles"},{name:"纽约",code:"America/New_York"},{name:"巴黎",code:"Europe/Paris"}]});function B(e){p((()=>{let{contentRect:t}=e[0],i=document.querySelector(".curr-timezone");i&&(i.style.fontSize=t.width/5.2+"px",i.style.lineHeight=t.width/5.2+"px")}))}function X(e){return V.widgetList.findIndex((t=>e.code===t.code))}function Z(e){e&&O({location:e}).then((e=>{let t=e.location||[];t=t.map((e=>({label:e.adm2+"-"+e.name,...e}))),V.cityOptions=t}))}async function ee(e){if(!e)return;let t=V.cityOptions.find((t=>t.id==e));V.tzList.some((e=>e.name===t.name))?H.warning("当前城市已添加"):(V.tzList.push({name:t.name,code:t.tz}),V.cityId="",R.set("app-worldClock-tzList",v(V.tzList)))}function te(e){let t=X(e);if(-1!=t){if(1==V.widgetList.length)return void H.warning("至少保留一个");V.widgetList.splice(t,1)}else{if(V.widgetList.length>=4)return void H.warning("最多只能选4个");V.widgetList.push(e)}L.emit("app-worldClock",V.widgetList),m.set("app-worldClock",V.widgetList)}function ie(){V.tzList=M,R.set("app-worldClock-tzList",v(V.tzList))}R.get("app-worldClock-tzList").then((e=>{V.tzList=e||M,ae()})),p((()=>{let e=r.value;new ResizeObserver(B).observe(e)}));let se=null;function ae(){let e=_[d().day()],i=d(t.date).week(),s=d(t.date).dayOfYear(),a=d.tz.guess();q.value=`${a}  ${d().format("YYYY年MM月DD日")} 星期${e} 第${i}周  第${s}天`,V.tzList=V.tzList.map((e=>({...e,time:F(e.code)})))}return se&&clearInterval(se),se=setInterval((()=>{ae()}),1e3),f((()=>{clearInterval(se)})),(t,l)=>(i(),o("div",{class:x(["hfull workClock-wrap",`icon-size-${e.size}`]),ref_key:"watchResize",ref:r,style:z([{padding:"12px"},`--fontFamily:${V.fontFamily}`])},[n("div",P,[a(g(E),{class:"wfull mt20 mr20","append-to":"",modelValue:V.cityId,"onUpdate:modelValue":l[0]||(l[0]=e=>V.cityId=e),"remote-method":Z,filterable:"",remote:"",placeholder:"输入城市",onChange:ee,size:"default",style:{width:"220px"}},{default:u((()=>[(i(!0),o(j,null,w(V.cityOptions,(e=>(i(),s(g(Y),{key:e.value,label:e.label,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),n("p",D,[n("time",null,b(F()),1)]),n("p",K,b(q.value),1),n("div",T,[n("ul",U,[(i(!0),o(j,null,w(V.tzList,((e,t)=>(i(),o("li",{onClick:t=>te(e),class:x({active:"-1"!=X(e)}),key:e.tz},[n("i",{onClick:y((e=>function(e){V.tzList.splice(e,1),R.set("app-worldClock-tzList",v(V.tzList))}(t)),["stop"]),class:"d-icon item-delete",title:"删除"},[a(g(S))],8,Q),n("b",G,b(e.name),1),n("p",null,b(e.time),1)],10,J)))),128))]),n("ul",W,[h(" 组件时区列表: "),(i(!0),o(j,null,w(V.widgetList,(e=>(i(),s(g($),{key:e.code,class:"mr5",style:{"--el-color-primary":"#409eff"},closable:"","disable-transitions":!1,onClose:t=>te(e)},{default:u((()=>[h(b(e.name),1)])),_:2},1032,["onClose"])))),128)),n("i",{onClick:ie,title:"重置时区列表",class:"d-icon reset-icon",style:{"vertical-align":"-2px"}},[a(g(N))])])])],6))}}),[["__scopeId","data-v-dc982c32"]]),ee={__name:"index",setup:t=>(t,o)=>(i(),s(e,{width:"860px",height:"550px",destroyOnClose:!0},{default:u((()=>[a(Z)])),_:1}))};export{ee as default};
